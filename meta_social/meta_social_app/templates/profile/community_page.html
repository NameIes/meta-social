{% extends 'profile/base.html' %}
{% load static %}
{% load cropping %}

{% block content %}
  <div class="row text-left">

    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title float-left">Название</h5>
          <small class="float-right text-muted"></small>
          <br><hr>
          <p class="card-text">Информация <hr/></p>
          <p class="card-text">О паблике</p>
          <p class="card-text">
            Ссылки
          </p>

        </div>
      </div>

      {% if c_user == user %}
        <div class="card mt-3">
          <div class="card-body">
            {% include 'post_menu.html' %}
          </div>
        </div>
      {% endif %}

      {% if c_user.profile.posts %}
        {% for post in c_user.profile.posts %}
          <div class="card mt-3">
            <div class="card-body">
              <img src="{% cropped_thumbnail post.user.profile 'cropping' %}" class="rounded-circle border border-dark" width=35 height=35>
              <a href="/accounts/profile/{{ post.user.id }}/">{{ post.user.username }}</a>
              <p class="card-text mt-2">{{ post.text }}</p>

              {% if post.get_images %}
                {% for post_img in post.get_images %}
                  <img src="{{ post_img.image.url }}" width="100%" class="mb-1">
                {% endfor %}
              {% endif %}

              <hr class="mt-1 mb-1">
              <span class="text-muted mb-0 float-right">{{ post.date }}</span>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <h5 class="mt-3 text-center">Нет постов.</h5>
      {% endif %}
    </div>
    <div class="col-xl-3">
      <div class="card">
        <style>
          .rollover {
            transition: 0.3s;
          }
          .rollover:hover {
            transition: 0.7s;
            opacity: 0.7;
          }
        </style>
        {% if user == c_user %}
          <a href="/accounts/profile/{{ c_user.id }}/change_avatar/">
            <img src="{% cropped_thumbnail c_user.profile 'cropping' %}" class="card-img-top rollover"/>
          </a>
        {% else %}
          <img src="{% cropped_thumbnail c_user.profile 'cropping' %}" class="card-img-top"/>
        {% endif %}
        <div class="card-body">
          {% if c_user == user %}
            <hr class="mt-0">
            <a href="/accounts/profile/{{ c_user.id }}/edit_profile/" class="btn btn-block btn-primary">Подписаться</a>
          {% else %}
              <hr class="mt-0">
              {% if pass_add_to_friends %}
              <form method="POST" action="/friends/send_request/{{ c_user.id }}/">
                {% csrf_token %}
                <input class="btn btn-block btn-primary" type="submit" value="Добавить в друзья">
            </form>
          {% endif %}
        {% endif %}
        </div>
      </div>
      <div class="card mt-3">
        <div class="card-body">
          <h6 class="card-title"> Написать сообщение <hr/> Упоминание <hr/> Включить уведомления <hr/> Рассказать друзьям <hr/> Ещё</h6>
        </div>
      </div>
      <div class="card mt-3 mb-3">
        <div class="card-body">
          <h6 class="card-title">Истории</h6>
        </div>
      </div>
      <div class="card mt-3 mb-3">
        <div class="card-body">
          <h6 class="card-title">Подписаны</h6>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

