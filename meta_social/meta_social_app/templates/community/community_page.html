{% extends 'profile/base.html' %}
{% load cropping %}

{% block content %}
  <div class="row text-left">

    <div class="col">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title float-left">Название</h5>
          <small class="float-right text-muted"></small>
          <br><hr>
          <p class="card-text">Информация <hr/></p>
          <p class="card-text">О паблике</p>
          <p class="card-text">
            Ссылки
          </p>

        </div>
      </div>

      <!-- TODO: Отображать данное меню лишь пользователям с правами -->
      <div class="mt-3">
        {% include 'post_menu.html' %}
      </div>
      <!-- ......................................................... -->

      <!-- TODO: Подставлять модель/ссылки для сообщества вместо пользователя -->
      {% if user.profile.posts %}
        {% for post in user.profile.posts %}
          <div class="card mt-3">
            <div class="card-body">
              <img src="{% cropped_thumbnail post.user.profile 'cropping' %}" class="rounded-circle border border-dark" width=35 height=35>
              <a href="/accounts/profile/{{ post.user.id }}/">{{ post.user.username }}</a>
              <p class="card-text mt-2">{{ post.text }}</p>

              {% if post.get_images %}
                {% for post_img in post.get_images %}
                  <img src="{{ post_img.image.url }}" width="100%" class="mb-1">
                {% endfor %}
              {% endif %}

              <hr class="mt-1 mb-1">
              <span class="text-muted mb-0 float-right">{{ post.date }}</span>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <h5 class="mt-3 text-center">Нет постов.</h5>
      {% endif %}
      <!-- .................................................................. -->
    </div>
    <div class="col-xl-3">
      <div class="card">
        <style>
          .rollover {
            transition: 0.3s;
          }
          .rollover:hover {
            transition: 0.7s;
            opacity: 0.7;
          }
        </style>
        <!-- TODO: Подставлять модель/ссылки для сообщества вместо пользователя -->
        <a href="/accounts/profile/{{ user.id }}/change_avatar/">
          <img src="{% cropped_thumbnail user.profile 'cropping' %}" class="card-img-top rollover"/>
        </a>
        <div class="card-body">
          <hr class="mt-0">
          <a href="/accounts/profile/{{ user.id }}/edit_profile/" class="btn btn-block btn-primary">Подписаться</a>
        </div>
        <!-- .................................................................. -->
      </div>
      <div class="card mt-3">
        <div class="card-body">
          <h6 class="card-title"> Написать сообщение <hr/> Упоминание <hr/> Включить уведомления <hr/> Рассказать друзьям <hr/> Ещё</h6>
        </div>
      </div>
      <div class="card mt-3 mb-3">
        <div class="card-body">
          <h6 class="card-title">Истории</h6>
        </div>
      </div>
      <div class="card mt-3 mb-3">
        <div class="card-body">
          <h6 class="card-title">Подписаны</h6>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

